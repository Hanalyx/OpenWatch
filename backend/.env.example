# OpenWatch Backend Configuration
# Copy this file to .env and update the values for your environment

# CRITICAL REQUIRED VARIABLES - Application will not start without these
SECRET_KEY=your-secret-key-here-must-be-at-least-32-characters-long
MASTER_KEY=your-master-key-here-must-be-at-least-32-characters-long

# Database Configuration
DATABASE_URL=postgresql://openwatch:password@localhost:5432/openwatch
OPENWATCH_DATABASE_SSL_MODE=require

# Optional Environment Variables with Defaults

# Application Settings
OPENWATCH_DEBUG=false
OPENWATCH_APP_NAME=OpenWatch
OPENWATCH_APP_VERSION=0.1.0

# Security Configuration
OPENWATCH_ALGORITHM=RS256
OPENWATCH_ACCESS_TOKEN_EXPIRE_MINUTES=30
OPENWATCH_REFRESH_TOKEN_EXPIRE_DAYS=7
OPENWATCH_REQUIRE_HTTPS=true
OPENWATCH_FIPS_MODE=true

# File Storage Paths (configurable for different environments)
SCAP_CONTENT_DIR=/app/data/scap
SCAN_RESULTS_DIR=/app/data/results

# Redis/Celery Configuration
OPENWATCH_REDIS_URL=redis://localhost:6379
OPENWATCH_REDIS_SSL=false

# OpenSCAP Settings
OPENWATCH_OPENSCAP_TIMEOUT=3600
OPENWATCH_MAX_CONCURRENT_SCANS=5

# CORS Settings (adjust for your frontend URL)
OPENWATCH_ALLOWED_ORIGINS=["https://localhost:3001"]

# File Upload Limits
OPENWATCH_MAX_UPLOAD_SIZE=104857600
OPENWATCH_ALLOWED_FILE_TYPES=[".xml",".zip",".bz2",".gz"]

# Logging Configuration
OPENWATCH_LOG_LEVEL=INFO
OPENWATCH_LOG_FILE=/app/logs/app.log
OPENWATCH_AUDIT_LOG_FILE=/app/logs/audit.log

# TLS Certificate Paths (for HTTPS)
OPENWATCH_TLS_CERT_FILE=/app/security/certs/server.crt
OPENWATCH_TLS_KEY_FILE=/app/security/certs/server.key
OPENWATCH_TLS_CA_FILE=/app/security/certs/ca.crt

# Database SSL Certificate Paths
OPENWATCH_DATABASE_SSL_CERT=/app/security/certs/client.crt
OPENWATCH_DATABASE_SSL_KEY=/app/security/certs/client.key
OPENWATCH_DATABASE_SSL_CA=/app/security/certs/ca.crt

# Redis SSL Certificate Paths
OPENWATCH_REDIS_SSL_CERT=/app/security/certs/redis-client.crt
OPENWATCH_REDIS_SSL_KEY=/app/security/certs/redis-client.key
OPENWATCH_REDIS_SSL_CA=/app/security/certs/ca.crt

# ==============================================================================
# ENVIRONMENT-SPECIFIC EXAMPLES
# ==============================================================================

# Development Environment Example:
# SECRET_KEY=$(openssl rand -hex 32)
# MASTER_KEY=$(openssl rand -hex 32)
# DATABASE_URL=postgresql://openwatch:devpassword@localhost:5432/openwatch_dev
# OPENWATCH_DEBUG=true
# OPENWATCH_REQUIRE_HTTPS=false
# SCAP_CONTENT_DIR=./data/scap
# SCAN_RESULTS_DIR=./data/results
# OPENWATCH_ALLOWED_ORIGINS=["http://localhost:3001"]

# Production Environment Example:
# SECRET_KEY=<strong-secret-from-secure-key-management>
# MASTER_KEY=<strong-master-key-from-secure-key-management>
# DATABASE_URL=postgresql://openwatch:strongpassword@db-server:5432/openwatch
# OPENWATCH_DEBUG=false
# OPENWATCH_REQUIRE_HTTPS=true
# SCAP_CONTENT_DIR=/app/data/scap
# SCAN_RESULTS_DIR=/app/data/results
# OPENWATCH_ALLOWED_ORIGINS=["https://openwatch.yourcompany.com"]

# Container Environment Example:
# SECRET_KEY=<from-docker-secret>
# MASTER_KEY=<from-docker-secret>
# DATABASE_URL=postgresql://openwatch:password@database:5432/openwatch
# OPENWATCH_REDIS_URL=redis://redis:6379
# SCAP_CONTENT_DIR=/app/data/scap
# SCAN_RESULTS_DIR=/app/data/results